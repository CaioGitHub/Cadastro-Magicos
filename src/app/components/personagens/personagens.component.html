<div class="personagens-container">
  <h2>ğŸ›¡ï¸ Cadastro de Personagens ğŸ‰</h2>

  <!-- ğŸ§¾ FormulÃ¡rio -->
  <form class="panel" (ngSubmit)="salvarPersonagem()">
    <div class="form-group">
      <label>Nome</label>
      <input [(ngModel)]="novoPersonagem.nome" name="nome" required />
    </div>

    <div class="form-group">
      <label>RaÃ§a</label>
      <input [(ngModel)]="novoPersonagem.raca" name="raca" required />
    </div>

    <div class="form-group">
      <label>NÃ­vel</label>
      <input [(ngModel)]="novoPersonagem.nivel" name="nivel" type="number" required />
    </div>

    <div class="form-group">
      <label>Cor de Fundo</label>
      <input [(ngModel)]="novoPersonagem.cor" name="cor" type="color" />
    </div>

    <div class="form-group">
      <label>URL da Imagem</label>
      <input [(ngModel)]="novoPersonagem.imagem" name="imagem" placeholder="https://â€¦" />
      <small *ngIf="!isImagemValida(novoPersonagem.imagem)">
        Dica: use uma URL comeÃ§ando com http:// ou https://
      </small>
    </div>

    <button type="submit" class="rpg-btn">
      {{ editando ? 'Salvar AlteraÃ§Ãµes' : 'Adicionar Personagem' }}
    </button>
  </form>

  <!-- ğŸ’ Lista de Personagens -->
  <div class="cards">
    <div class="card" *ngFor="let p of personagens; let i = index" [style.backgroundColor]="p.cor">
      <img
        [src]="p.imagem && p.imagem.trim() !== '' ? p.imagem : placeholder"
        (error)="onImgError($event)"
        [alt]="p.nome"
        loading="lazy"
        referrerpolicy="no-referrer"
      />
      <h3>{{ p.nome }}</h3>
      <p>RaÃ§a: {{ p.raca }}</p>
      <p>NÃ­vel: {{ p.nivel }}</p>

      <div class="card-buttons">
        <button type="button" class="edit-btn" (click)="editarPersonagem(i)">âœï¸ Editar</button>
        <button type="button" class="delete-btn" (click)="removerPersonagem(i)">ğŸ—‘ï¸ Excluir</button>
      </div>
    </div>
  </div>

  <!-- ğŸ§¹ Limpar tudo -->
  <div class="flex justify-center mt-4">
    <button class="delete-btn" (click)="limparTudo()">ğŸ§¹ Limpar Todos</button>
  </div>
</div>
