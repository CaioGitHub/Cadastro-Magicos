<div class="itens-wrapper">
  <h2>⚔️ Cadastro de Itens Mágicos ⚗️</h2>

  <form class="panel" (ngSubmit)="salvarItem()">
    <div class="form-group">
      <label>Nome do Item</label>
      <input [(ngModel)]="novoItem.nome" name="nome" required />
    </div>

    <div class="form-group">
      <label>Tipo</label>
      <input [(ngModel)]="novoItem.tipo" name="tipo" required />
    </div>

    <div class="form-group">
      <label>Poder</label>
      <input [(ngModel)]="novoItem.poder" name="poder" type="number" required />
    </div>

    <div class="form-group">
      <label>URL da Imagem</label>
      <input [(ngModel)]="novoItem.imagem" name="imagem" placeholder="https://…" />
      <small *ngIf="!isImagemValida(novoItem.imagem)">
        Dica: use uma URL começando com http:// ou https://
      </small>
    </div>

    <button type="submit" class="rpg-btn">
      {{ editando ? "Salvar Alterações" : "Adicionar Item" }}
    </button>
  </form>

  <div class="cards">
    <div class="card" *ngFor="let item of itens; let i = index">
      <img
        [src]="item.imagem && item.imagem.trim() !== '' ? item.imagem : placeholder"
        (error)="onImgError($event)"
        [alt]="item.nome"
        loading="lazy"
        referrerpolicy="no-referrer"
      />
      <h3>{{ item.nome }}</h3>
      <p>Tipo: {{ item.tipo }}</p>
      <p>Poder: {{ item.poder }}</p>

      <div class="card-buttons">
        <button type="button" class="edit-btn" (click)="editarItem(i)">✏️ Editar</button>
        <button type="button" class="delete-btn" (click)="removerItem(i)">🗑️ Excluir</button>
      </div>
    </div>
  </div>

  <div class="flex justify-center mt-4">
    <button class="delete-btn" (click)="limparTudo()">🧹 Limpar Todos</button>
  </div>
</div>
